SET session_replication_role = 'replica';

INSERT INTO public.card_setting (id, user_id, name, new_cards_steps_in_minutes, new_cards_max_per_day, new_cards_graduating_interval_in_days, new_cards_easy_interval_in_days, new_cards_starting_ease_factor_in_permille, new_cards_bury_related, mature_cards_max_per_day, mature_cards_ease_factor_easy_bonus_factor_in_permille, mature_cards_interval_factor_in_permille, mature_cards_maximum_interval_in_days, mature_cards_hard_interval_factor_in_permille, mature_cards_bury_related, lapsed_cards_steps_in_minutes, lapsed_cards_new_interval_factor_in_permille, lapsed_cards_minimum_interval_in_days, lapsed_cards_leech_threshold, show_answer_timer, automatically_play_audio, replay_question_audio_on_answer) VALUES (4, 25, 'Default', '1 10', 20, 1, 4, 2500, true, 200, 1300, 1000, 32767, 1200, true, '10', 0, 1, 8, false, false, false);
INSERT INTO public.card_setting (id, user_id, name, new_cards_steps_in_minutes, new_cards_max_per_day, new_cards_graduating_interval_in_days, new_cards_easy_interval_in_days, new_cards_starting_ease_factor_in_permille, new_cards_bury_related, mature_cards_max_per_day, mature_cards_ease_factor_easy_bonus_factor_in_permille, mature_cards_interval_factor_in_permille, mature_cards_maximum_interval_in_days, mature_cards_hard_interval_factor_in_permille, mature_cards_bury_related, lapsed_cards_steps_in_minutes, lapsed_cards_new_interval_factor_in_permille, lapsed_cards_minimum_interval_in_days, lapsed_cards_leech_threshold, show_answer_timer, automatically_play_audio, replay_question_audio_on_answer) VALUES (5, 26, 'Default', '1 10', 20, 1, 4, 2500, true, 200, 1300, 1000, 32767, 1200, true, '10', 0, 1, 8, false, false, false);
INSERT INTO public.card_setting (id, user_id, name, new_cards_steps_in_minutes, new_cards_max_per_day, new_cards_graduating_interval_in_days, new_cards_easy_interval_in_days, new_cards_starting_ease_factor_in_permille, new_cards_bury_related, mature_cards_max_per_day, mature_cards_ease_factor_easy_bonus_factor_in_permille, mature_cards_interval_factor_in_permille, mature_cards_maximum_interval_in_days, mature_cards_hard_interval_factor_in_permille, mature_cards_bury_related, lapsed_cards_steps_in_minutes, lapsed_cards_new_interval_factor_in_permille, lapsed_cards_minimum_interval_in_days, lapsed_cards_leech_threshold, show_answer_timer, automatically_play_audio, replay_question_audio_on_answer) VALUES (6, 27, 'Default', '1 10', 20, 1, 4, 2500, true, 200, 1300, 1000, 32767, 1200, true, '10', 0, 1, 8, false, false, false);
INSERT INTO public.card_setting (id, user_id, name, new_cards_steps_in_minutes, new_cards_max_per_day, new_cards_graduating_interval_in_days, new_cards_easy_interval_in_days, new_cards_starting_ease_factor_in_permille, new_cards_bury_related, mature_cards_max_per_day, mature_cards_ease_factor_easy_bonus_factor_in_permille, mature_cards_interval_factor_in_permille, mature_cards_maximum_interval_in_days, mature_cards_hard_interval_factor_in_permille, mature_cards_bury_related, lapsed_cards_steps_in_minutes, lapsed_cards_new_interval_factor_in_permille, lapsed_cards_minimum_interval_in_days, lapsed_cards_leech_threshold, show_answer_timer, automatically_play_audio, replay_question_audio_on_answer) VALUES (7, 28, 'Default', '1 10', 20, 1, 4, 2500, true, 200, 1300, 1000, 32767, 1200, true, '10', 0, 1, 8, false, false, false);
INSERT INTO public.card_setting (id, user_id, name, new_cards_steps_in_minutes, new_cards_max_per_day, new_cards_graduating_interval_in_days, new_cards_easy_interval_in_days, new_cards_starting_ease_factor_in_permille, new_cards_bury_related, mature_cards_max_per_day, mature_cards_ease_factor_easy_bonus_factor_in_permille, mature_cards_interval_factor_in_permille, mature_cards_maximum_interval_in_days, mature_cards_hard_interval_factor_in_permille, mature_cards_bury_related, lapsed_cards_steps_in_minutes, lapsed_cards_new_interval_factor_in_permille, lapsed_cards_minimum_interval_in_days, lapsed_cards_leech_threshold, show_answer_timer, automatically_play_audio, replay_question_audio_on_answer) VALUES (8, 29, 'Default', '1 10', 20, 1, 4, 2500, true, 200, 1300, 1000, 32767, 1200, true, '10', 0, 1, 8, false, false, false);
INSERT INTO public.card_setting (id, user_id, name, new_cards_steps_in_minutes, new_cards_max_per_day, new_cards_graduating_interval_in_days, new_cards_easy_interval_in_days, new_cards_starting_ease_factor_in_permille, new_cards_bury_related, mature_cards_max_per_day, mature_cards_ease_factor_easy_bonus_factor_in_permille, mature_cards_interval_factor_in_permille, mature_cards_maximum_interval_in_days, mature_cards_hard_interval_factor_in_permille, mature_cards_bury_related, lapsed_cards_steps_in_minutes, lapsed_cards_new_interval_factor_in_permille, lapsed_cards_minimum_interval_in_days, lapsed_cards_leech_threshold, show_answer_timer, automatically_play_audio, replay_question_audio_on_answer) VALUES (9, 30, 'Default', '1 10', 20, 1, 4, 2500, true, 200, 1300, 1000, 32767, 1200, true, '10', 0, 1, 8, false, false, false);
INSERT INTO public.card_setting (id, user_id, name, new_cards_steps_in_minutes, new_cards_max_per_day, new_cards_graduating_interval_in_days, new_cards_easy_interval_in_days, new_cards_starting_ease_factor_in_permille, new_cards_bury_related, mature_cards_max_per_day, mature_cards_ease_factor_easy_bonus_factor_in_permille, mature_cards_interval_factor_in_permille, mature_cards_maximum_interval_in_days, mature_cards_hard_interval_factor_in_permille, mature_cards_bury_related, lapsed_cards_steps_in_minutes, lapsed_cards_new_interval_factor_in_permille, lapsed_cards_minimum_interval_in_days, lapsed_cards_leech_threshold, show_answer_timer, automatically_play_audio, replay_question_audio_on_answer) VALUES (10, 31, 'Default', '1 10', 20, 1, 4, 2500, true, 200, 1300, 1000, 32767, 1200, true, '10', 0, 1, 8, false, false, false);
INSERT INTO public.card_setting (id, user_id, name, new_cards_steps_in_minutes, new_cards_max_per_day, new_cards_graduating_interval_in_days, new_cards_easy_interval_in_days, new_cards_starting_ease_factor_in_permille, new_cards_bury_related, mature_cards_max_per_day, mature_cards_ease_factor_easy_bonus_factor_in_permille, mature_cards_interval_factor_in_permille, mature_cards_maximum_interval_in_days, mature_cards_hard_interval_factor_in_permille, mature_cards_bury_related, lapsed_cards_steps_in_minutes, lapsed_cards_new_interval_factor_in_permille, lapsed_cards_minimum_interval_in_days, lapsed_cards_leech_threshold, show_answer_timer, automatically_play_audio, replay_question_audio_on_answer) VALUES (11, 32, 'Default', '1 10', 20, 1, 4, 2500, true, 200, 1300, 1000, 32767, 1200, true, '10', 0, 1, 8, false, false, false);
INSERT INTO public.card_setting (id, user_id, name, new_cards_steps_in_minutes, new_cards_max_per_day, new_cards_graduating_interval_in_days, new_cards_easy_interval_in_days, new_cards_starting_ease_factor_in_permille, new_cards_bury_related, mature_cards_max_per_day, mature_cards_ease_factor_easy_bonus_factor_in_permille, mature_cards_interval_factor_in_permille, mature_cards_maximum_interval_in_days, mature_cards_hard_interval_factor_in_permille, mature_cards_bury_related, lapsed_cards_steps_in_minutes, lapsed_cards_new_interval_factor_in_permille, lapsed_cards_minimum_interval_in_days, lapsed_cards_leech_threshold, show_answer_timer, automatically_play_audio, replay_question_audio_on_answer) VALUES (12, 33, 'Default', '1 10', 20, 1, 4, 2500, true, 200, 1300, 1000, 32767, 1200, true, '10', 0, 1, 8, false, false, false);
INSERT INTO public.card_setting (id, user_id, name, new_cards_steps_in_minutes, new_cards_max_per_day, new_cards_graduating_interval_in_days, new_cards_easy_interval_in_days, new_cards_starting_ease_factor_in_permille, new_cards_bury_related, mature_cards_max_per_day, mature_cards_ease_factor_easy_bonus_factor_in_permille, mature_cards_interval_factor_in_permille, mature_cards_maximum_interval_in_days, mature_cards_hard_interval_factor_in_permille, mature_cards_bury_related, lapsed_cards_steps_in_minutes, lapsed_cards_new_interval_factor_in_permille, lapsed_cards_minimum_interval_in_days, lapsed_cards_leech_threshold, show_answer_timer, automatically_play_audio, replay_question_audio_on_answer) VALUES (13, 34, 'Default', '1 10', 20, 1, 4, 2500, true, 200, 1300, 1000, 32767, 1200, true, '10', 0, 1, 8, false, false, false);

INSERT INTO public.deck (id, user_id, name, is_public, followers, ts_vector) VALUES (25, 25, 'Default Deck', false, 0, NULL);
INSERT INTO public.deck (id, user_id, name, is_public, followers, ts_vector) VALUES (26, 26, 'Default Deck', false, 0, NULL);
INSERT INTO public.deck (id, user_id, name, is_public, followers, ts_vector) VALUES (27, 27, 'Default Deck', false, 0, NULL);
INSERT INTO public.deck (id, user_id, name, is_public, followers, ts_vector) VALUES (28, 28, 'Default Deck', false, 0, NULL);
INSERT INTO public.deck (id, user_id, name, is_public, followers, ts_vector) VALUES (29, 29, 'Default Deck', false, 0, NULL);
INSERT INTO public.deck (id, user_id, name, is_public, followers, ts_vector) VALUES (30, 30, 'Default Deck', false, 0, NULL);
INSERT INTO public.deck (id, user_id, name, is_public, followers, ts_vector) VALUES (31, 31, 'Default Deck', false, 0, NULL);
INSERT INTO public.deck (id, user_id, name, is_public, followers, ts_vector) VALUES (32, 32, 'Default Deck', false, 0, NULL);
INSERT INTO public.deck (id, user_id, name, is_public, followers, ts_vector) VALUES (33, 33, 'Default Deck', false, 0, NULL);
INSERT INTO public.deck (id, user_id, name, is_public, followers, ts_vector) VALUES (34, 34, 'Default Deck', false, 0, NULL);

INSERT INTO public.padawan (id, display_name, default_deck_id, default_card_setting_id, show_next_review_time, show_remaining_card_count, mix_new_and_review, next_day_starts_at_x_hours_past_midnight, learn_ahead_limit_in_minutes, timebox_time_limit_in_minutes, is_night_mode) VALUES (25, 'Alex', 25, 4, false, false, 0, 0, 0, 0, false);
INSERT INTO public.padawan (id, display_name, default_deck_id, default_card_setting_id, show_next_review_time, show_remaining_card_count, mix_new_and_review, next_day_starts_at_x_hours_past_midnight, learn_ahead_limit_in_minutes, timebox_time_limit_in_minutes, is_night_mode) VALUES (26, 'Alison', 26, 5, false, false, 0, 0, 0, 0, false);
INSERT INTO public.padawan (id, display_name, default_deck_id, default_card_setting_id, show_next_review_time, show_remaining_card_count, mix_new_and_review, next_day_starts_at_x_hours_past_midnight, learn_ahead_limit_in_minutes, timebox_time_limit_in_minutes, is_night_mode) VALUES (27, 'Nina', 27, 6, false, false, 0, 0, 0, 0, false);
INSERT INTO public.padawan (id, display_name, default_deck_id, default_card_setting_id, show_next_review_time, show_remaining_card_count, mix_new_and_review, next_day_starts_at_x_hours_past_midnight, learn_ahead_limit_in_minutes, timebox_time_limit_in_minutes, is_night_mode) VALUES (28, 'Mark', 28, 7, false, false, 0, 0, 0, 0, false);
INSERT INTO public.padawan (id, display_name, default_deck_id, default_card_setting_id, show_next_review_time, show_remaining_card_count, mix_new_and_review, next_day_starts_at_x_hours_past_midnight, learn_ahead_limit_in_minutes, timebox_time_limit_in_minutes, is_night_mode) VALUES (29, 'Caren', 29, 8, false, false, 0, 0, 0, 0, false);
INSERT INTO public.padawan (id, display_name, default_deck_id, default_card_setting_id, show_next_review_time, show_remaining_card_count, mix_new_and_review, next_day_starts_at_x_hours_past_midnight, learn_ahead_limit_in_minutes, timebox_time_limit_in_minutes, is_night_mode) VALUES (30, 'Christine', 30, 9, false, false, 0, 0, 0, 0, false);
INSERT INTO public.padawan (id, display_name, default_deck_id, default_card_setting_id, show_next_review_time, show_remaining_card_count, mix_new_and_review, next_day_starts_at_x_hours_past_midnight, learn_ahead_limit_in_minutes, timebox_time_limit_in_minutes, is_night_mode) VALUES (31, 'Lucas', 31, 10, false, false, 0, 0, 0, 0, false);
INSERT INTO public.padawan (id, display_name, default_deck_id, default_card_setting_id, show_next_review_time, show_remaining_card_count, mix_new_and_review, next_day_starts_at_x_hours_past_midnight, learn_ahead_limit_in_minutes, timebox_time_limit_in_minutes, is_night_mode) VALUES (32, 'Mattics', 32, 11, false, false, 0, 0, 0, 0, false);
INSERT INTO public.padawan (id, display_name, default_deck_id, default_card_setting_id, show_next_review_time, show_remaining_card_count, mix_new_and_review, next_day_starts_at_x_hours_past_midnight, learn_ahead_limit_in_minutes, timebox_time_limit_in_minutes, is_night_mode) VALUES (33, 'Dustin', 33, 12, false, false, 0, 0, 0, 0, false);
INSERT INTO public.padawan (id, display_name, default_deck_id, default_card_setting_id, show_next_review_time, show_remaining_card_count, mix_new_and_review, next_day_starts_at_x_hours_past_midnight, learn_ahead_limit_in_minutes, timebox_time_limit_in_minutes, is_night_mode) VALUES (34, 'Steve', 34, 13, false, false, 0, 0, 0, 0, false);

INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (25, 1001, 4);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (25, 1002, 4);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (25, 1003, 4);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (25, 1006, 4);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (25, 1005, 4);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (26, 1001, 5);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (26, 1002, 5);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (26, 1003, 5);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (26, 1006, 5);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (26, 1005, 5);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (27, 1001, 6);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (27, 1002, 6);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (27, 1003, 6);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (27, 1006, 6);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (27, 1005, 6);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (28, 1001, 7);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (28, 1002, 7);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (28, 1003, 7);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (28, 1006, 7);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (28, 1005, 7);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (29, 1001, 8);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (29, 1002, 8);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (29, 1003, 8);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (29, 1006, 8);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (29, 1005, 8);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (30, 1001, 9);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (30, 1002, 9);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (30, 1003, 9);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (30, 1006, 9);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (30, 1005, 9);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (31, 1001, 10);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (31, 1002, 10);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (31, 1003, 10);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (31, 1006, 10);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (31, 1005, 10);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (32, 1001, 11);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (32, 1002, 11);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (32, 1003, 11);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (32, 1006, 11);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (32, 1005, 11);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (33, 1001, 12);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (33, 1002, 12);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (33, 1003, 12);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (33, 1006, 12);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (33, 1005, 12);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (34, 1001, 13);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (34, 1002, 13);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (34, 1003, 13);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (34, 1006, 13);
INSERT INTO public.user_2_grompleaf (user_id, grompleaf_id, default_card_setting_id) VALUES (34, 1005, 13);

SELECT pg_catalog.setval('public.card_setting$id$seq', 40, false);
SELECT pg_catalog.setval('public.user$id$seq', 40, false);
SELECT pg_catalog.setval('public.filter$id$seq', 40, false);
SELECT pg_catalog.setval('public.deck$id$seq', 40, false);

SET session_replication_role = 'origin';

do $$ -- Verifies FKs (only) https://dba.stackexchange.com/a/250252
  declare r record;
BEGIN
FOR r IN  (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = TRIM(both ''"'' from ''%I''); ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    tc.constraint_name,
    tc.table_name,
    tc.constraint_name
  ) AS x
  FROM information_schema.table_constraints AS tc
  JOIN information_schema.tables t ON t.table_name = tc.table_name and t.table_type = 'BASE TABLE'
  JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name
  JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name
  WHERE  constraint_type = 'FOREIGN KEY'
    AND tc.constraint_schema = 'public'
)
  LOOP
    EXECUTE (r.x);
  END LOOP;
END;
$$;
